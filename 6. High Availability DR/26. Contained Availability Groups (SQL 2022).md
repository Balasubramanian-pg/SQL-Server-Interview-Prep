# 26. Contained Availability Groups (SQL 2022)

Canonical documentation for 26. Contained Availability Groups (SQL 2022). This document defines the conceptual model, terminology, and standard usage patterns.

> [!NOTE]
> This documentation is implementation-agnostic and intended to serve as a stable reference.

## 1. Purpose and Problem Space
Describe why 26. Contained Availability Groups (SQL 2022) exists and the class of problems it addresses.
Contained Availability Groups in SQL Server 2022 are designed to address the need for high availability and disaster recovery for databases, while also providing a more self-contained and manageable solution. This feature aims to simplify the deployment and management of Availability Groups by removing the requirement for a separate Windows Server Failover Cluster (WSFC) cluster. The primary problem space that Contained Availability Groups addresses is the complexity and overhead associated with traditional Availability Group configurations, which can be daunting for smaller-scale deployments or environments with limited IT resources.

## 2. Conceptual Overview
Provide a high-level mental model of the topic.
Contained Availability Groups in SQL Server 2022 introduce a new paradigm where the Availability Group is managed entirely within the SQL Server instance, without the need for an external WSFC cluster. This approach streamlines the configuration and management process, making it more accessible to a broader range of users. The conceptual model revolves around the idea of a self-contained Availability Group that can be created, managed, and monitored directly from within the SQL Server instance, leveraging the same underlying technologies that power traditional Availability Groups but with a more simplified and integrated approach.

## 3. Terminology and Definitions
| Term | Definition |
|------|------------|
| Contained Availability Group | An Availability Group that is managed entirely within a SQL Server instance, without the need for an external Windows Server Failover Cluster (WSFC) cluster. |
| Availability Replica | A copy of a database in an Availability Group that can be either a readable secondary replica or an offline secondary replica. |
| Listener | A virtual network name that clients can use to connect to the Availability Group, which directs them to the current primary replica. |
| Automatic Seeding | The process by which SQL Server automatically initializes a new secondary replica with the data from the primary replica. |
| Failover | The process of switching the role of the primary replica to a secondary replica, typically in response to a failure or maintenance requirement. |

## 4. Core Concepts
Explain the fundamental ideas that form the basis of this topic.
The core concepts of Contained Availability Groups include the ability to create and manage Availability Groups directly within the SQL Server instance, the use of automatic seeding for initializing new replicas, and the integration of listeners for client connectivity. Additionally, Contained Availability Groups support failover and failback operations, allowing for high availability and disaster recovery capabilities. These concepts are built upon the foundation of SQL Server's Availability Group technology but are tailored to provide a more streamlined and self-contained experience.

## 5. Standard Model
Describe the generally accepted or recommended model.
The standard model for Contained Availability Groups involves creating an Availability Group within a SQL Server instance, specifying the databases to be included, and configuring the replicas and listener. This model typically includes a primary replica and one or more secondary replicas, with the listener providing a single point of connectivity for clients. The standard model also recommends configuring automatic seeding and setting up appropriate monitoring and alerting to ensure the health and availability of the Availability Group.

## 6. Common Patterns
Document recurring, accepted patterns.
Common patterns for Contained Availability Groups include deploying them in scenarios where high availability and disaster recovery are critical but the complexity of traditional Availability Group configurations is a barrier. Another pattern is using Contained Availability Groups as a stepping stone for smaller-scale deployments that may eventually require the more advanced features of traditional Availability Groups. Additionally, there is a pattern of leveraging Contained Availability Groups in development and testing environments to simplify the setup and teardown of Availability Group configurations for application testing and validation.

## 7. Anti-Patterns
Describe common but discouraged practices.
Anti-patterns for Contained Availability Groups include underestimating the network requirements and not properly sizing the environment for the expected workload, leading to performance issues. Another anti-pattern is not regularly monitoring and maintaining the Availability Group, which can result in decreased availability and increased risk of data loss. Furthermore, using Contained Availability Groups in production environments without thoroughly testing and validating their configuration and behavior is discouraged, as it can lead to unforeseen issues and downtime.

## 8. References
Provide exactly five authoritative external references.
1. [Microsoft Documentation: Contained Availability Groups](https://docs.microsoft.com/en-us/sql/database-engine/availability-groups/windows/contained-availability-groups?view=sql-server-ver15)
2. [SQL Server Blog: Introducing Contained Availability Groups](https://cloudblogs.microsoft.com/sqlserver/2022/02/14/introducing-contained-availability-groups/)
3. [Microsoft Learn: Contained Availability Groups](https://learn.microsoft.com/en-us/training/modules/explore-sql-server-2022-new-features/7-contained-availability-groups)
4. [SQL Server Tutorials: Configuring Contained Availability Groups](https://www.sqlservertutorial.net/sql-server-availability-groups/configuring-contained-availability-groups/)
5. [TechCommunity: Best Practices for Contained Availability Groups](https://techcommunity.microsoft.com/t5/sql-server/best-practices-for-contained-availability-groups/ba-p/3674425)

## 9. Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-02-14 | Initial documentation |