# 9. Failover Cluster Instances (FCI) vs AGs

Canonical documentation for 9. Failover Cluster Instances (FCI) vs AGs. This document defines the conceptual model, terminology, and standard usage patterns.

> [!NOTE]
> This documentation is implementation-agnostic and intended to serve as a stable reference.

## 1. Purpose and Problem Space
Describe why 9. Failover Cluster Instances (FCI) vs AGs exists and the class of problems it addresses.
Failover Cluster Instances (FCI) and Availability Groups (AGs) are two high-availability and disaster-recovery solutions for SQL Server. They address the problem of database downtime and data loss due to hardware or software failures, providing a way to ensure continuous database availability and minimize data loss. The purpose of FCI and AGs is to provide a reliable and efficient way to manage database instances, ensuring that databases remain online and accessible to users, even in the event of a failure.

## 2. Conceptual Overview
Provide a high-level mental model of the topic.
FCI and AGs are both designed to provide high availability and disaster recovery for SQL Server databases. However, they operate in different ways. FCI is a traditional clustering technology that provides high availability at the instance level, while AGs provide high availability and disaster recovery at the database level. FCI uses a shared storage approach, where all nodes in the cluster share the same storage, while AGs use a distributed storage approach, where each node has its own storage.

## 3. Terminology and Definitions
| Term | Definition |
|------|------------|
| Failover Cluster Instance (FCI) | A SQL Server instance that is installed on a Windows Server Failover Cluster (WSFC) and provides high availability at the instance level. |
| Availability Group (AG) | A database-level high-availability and disaster-recovery solution that provides automatic failover and redundancy for a group of databases. |
| Node | A server that is part of a failover cluster or availability group. |
| Witness | A server that is used to determine the state of a failover cluster or availability group. |
| Automatic Seeding | A process that automatically seeds a database in an availability group, allowing for faster recovery and reduced downtime. |

## 4. Core Concepts
Explain the fundamental ideas that form the basis of this topic.
The core concepts of FCI and AGs include:
* High availability: The ability of a system to remain online and accessible to users, even in the event of a failure.
* Disaster recovery: The ability of a system to recover from a disaster, such as a hardware or software failure, and minimize data loss.
* Failover: The process of automatically switching to a standby node or instance in the event of a failure.
* Redundancy: The use of multiple nodes or instances to provide duplicate copies of data, ensuring that data is always available.

## 5. Standard Model
Describe the generally accepted or recommended model.
The standard model for FCI and AGs includes:
* A minimum of two nodes for FCI, with one node acting as the primary instance and the other node acting as the standby instance.
* A minimum of two nodes for AGs, with one node acting as the primary replica and the other node acting as the secondary replica.
* The use of a witness server to determine the state of the failover cluster or availability group.
* The use of automatic seeding to seed databases in an availability group.

## 6. Common Patterns
Document recurring, accepted patterns.
Common patterns for FCI and AGs include:
* Using FCI for high-availability solutions that require instance-level failover.
* Using AGs for high-availability and disaster-recovery solutions that require database-level failover.
* Using a combination of FCI and AGs to provide a comprehensive high-availability and disaster-recovery solution.

## 7. Anti-Patterns
Describe common but discouraged practices.
Anti-patterns for FCI and AGs include:
* Using FCI for disaster-recovery solutions, as FCI is designed for high availability only.
* Using AGs for instance-level failover, as AGs are designed for database-level failover.
* Not using a witness server, which can lead to split-brain scenarios and reduce the effectiveness of the failover cluster or availability group.

## 8. References
Provide exactly five authoritative external references.
1. [Microsoft SQL Server Documentation: Failover Cluster Instances](https://docs.microsoft.com/en-us/sql/sql-server/failover-clusters?view=sql-server-ver15)
2. [Microsoft SQL Server Documentation: Availability Groups](https://docs.microsoft.com/en-us/sql/database-engine/availability-groups/windows/always-on-availability-groups-sql-server?view=sql-server-ver15)
3. [Microsoft SQL Server Documentation: High Availability and Disaster Recovery](https://docs.microsoft.com/en-us/sql/sql-server/high-availability-solutions?view=sql-server-ver15)
4. [SQL Server Pro: Failover Clustering vs. Availability Groups](https://www.sqlserverpro.com/database-administration/failover-clustering-vs-availability-groups/)
5. [DBTA: SQL Server High Availability and Disaster Recovery](https://www.dbta.com/Editorial/Trends-and-Applications/SQL-Server-High-Availability-and-Disaster-Recovery-134191)

## 9. Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-02-14 | Initial documentation |