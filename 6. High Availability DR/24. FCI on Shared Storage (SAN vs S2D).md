# 24. FCI on Shared Storage (SAN vs S2D)

Canonical documentation for 24. FCI on Shared Storage (SAN vs S2D). This document defines the conceptual model, terminology, and standard usage patterns.

> [!NOTE]
> This documentation is implementation-agnostic and intended to serve as a stable reference.

## 1. Purpose and Problem Space
Describe why 24. FCI on Shared Storage (SAN vs S2D) exists and the class of problems it addresses.
The purpose of FCI on Shared Storage is to provide a highly available and scalable storage solution for enterprise environments. The problem space addressed by FCI on Shared Storage includes the need for shared access to data, high availability, and scalability. FCI on Shared Storage solves these problems by providing a clustered storage solution that can be accessed by multiple nodes, ensuring that data is always available and can be scaled as needed.

## 2. Conceptual Overview
Provide a high-level mental model of the topic.
FCI on Shared Storage (SAN vs S2D) refers to the use of Failover Clustering (FCI) with shared storage, which can be either Storage Area Network (SAN) or Storage Spaces Direct (S2D). The conceptual overview of FCI on Shared Storage involves multiple nodes connected to a shared storage system, which can be either a SAN or S2D. The nodes work together as a cluster to provide high availability and scalability, with the shared storage system providing a single, unified view of the data.

## 3. Terminology and Definitions
| Term | Definition |
|------|------------|
| FCI | Failover Clustering, a technology that allows multiple nodes to work together as a cluster to provide high availability and scalability. |
| SAN | Storage Area Network, a dedicated network that provides access to shared storage devices. |
| S2D | Storage Spaces Direct, a technology that allows multiple nodes to work together to provide a shared storage system. |
| Node | A server or computer that is part of a cluster. |
| Cluster | A group of nodes that work together to provide high availability and scalability. |

## 4. Core Concepts
Explain the fundamental ideas that form the basis of this topic.
The core concepts of FCI on Shared Storage include:
* **Shared storage**: A storage system that can be accessed by multiple nodes.
* **Failover clustering**: A technology that allows multiple nodes to work together as a cluster to provide high availability and scalability.
* **Node membership**: The process of adding or removing nodes from a cluster.
* **Quorum**: A mechanism that ensures a cluster remains operational even in the event of node failures.

## 5. Standard Model
Describe the generally accepted or recommended model.
The standard model for FCI on Shared Storage involves the use of multiple nodes connected to a shared storage system, which can be either a SAN or S2D. The nodes work together as a cluster to provide high availability and scalability, with the shared storage system providing a single, unified view of the data. The recommended configuration includes:
* **Odd number of nodes**: To ensure quorum and prevent split-brain scenarios.
* **Shared storage**: A SAN or S2D system that provides access to shared storage devices.
* **Node connectivity**: Multiple network connections between nodes to ensure high availability.

## 6. Common Patterns
Document recurring, accepted patterns.
Common patterns for FCI on Shared Storage include:
* **Active-passive clustering**: A configuration where one node is active and the other nodes are passive, providing failover in the event of node failure.
* **Active-active clustering**: A configuration where all nodes are active, providing load balancing and high availability.
* **Stretch clustering**: A configuration where nodes are located in different geographic locations, providing disaster recovery and business continuity.

## 7. Anti-Patterns
Describe common but discouraged practices.
Anti-patterns for FCI on Shared Storage include:
* **Even number of nodes**: Can lead to split-brain scenarios and quorum issues.
* **Single point of failure**: A configuration where a single node or component can cause the entire cluster to fail.
* **Insufficient node connectivity**: Can lead to network partitions and cluster failures.

## 8. References
Provide exactly five authoritative external references.
1. [Microsoft Failover Clustering](https://docs.microsoft.com/en-us/windows-server/failover-clustering/failover-clustering-overview)
2. [Storage Area Network (SAN)](https://en.wikipedia.org/wiki/Storage_area_network)
3. [Storage Spaces Direct](https://docs.microsoft.com/en-us/windows-server/storage/storage-spaces/storage-spaces-direct-overview)
4. [Failover Clustering with Storage Spaces Direct](https://docs.microsoft.com/en-us/windows-server/storage/storage-spaces/failover-clustering-with-storage-spaces-direct)
5. [Microsoft Cluster Configuration](https://docs.microsoft.com/en-us/windows-server/failover-clustering/cluster-configuration)

## 9. Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-02-14 | Initial documentation |