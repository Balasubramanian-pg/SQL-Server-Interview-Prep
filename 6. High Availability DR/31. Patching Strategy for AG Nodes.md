# 31. Patching Strategy for AG Nodes

Canonical documentation for 31. Patching Strategy for AG Nodes. This document defines the conceptual model, terminology, and standard usage patterns.

> [!NOTE]
> This documentation is implementation-agnostic and intended to serve as a stable reference.

## 1. Purpose and Problem Space
Describe why 31. Patching Strategy for AG Nodes exists and the class of problems it addresses.
The purpose of a patching strategy for Availability Group (AG) nodes is to ensure the reliable and efficient application of updates, fixes, and patches to the nodes in an Availability Group configuration. This is crucial for maintaining the high availability, performance, and security of databases in the group. The class of problems this strategy addresses includes minimizing downtime, reducing the risk of data loss or corruption, and ensuring compliance with organizational security policies.

## 2. Conceptual Overview
Provide a high-level mental model of the topic.
The conceptual overview of a patching strategy for AG nodes involves a systematic approach to planning, testing, and applying patches to each node in the Availability Group. This includes assessing the current state of the nodes, identifying required patches, testing the patches in a non-production environment, applying the patches to the nodes, and verifying the successful application of the patches.

## 3. Terminology and Definitions
| Term | Definition |
|------|------------|
| Availability Group (AG) | A container that holds a set of databases that fail over together. |
| Node | A server instance that participates in an Availability Group. |
| Patch | A set of changes to the software designed to update, fix, or improve it. |
| Patching Strategy | A planned approach to applying patches to nodes in an Availability Group. |
| Failover | The process of automatically switching to a standby node in the event of a failure. |

## 4. Core Concepts
Explain the fundamental ideas that form the basis of this topic.
The core concepts of a patching strategy for AG nodes include:
- **Node Patching**: Applying patches to individual nodes in the Availability Group.
- **Rolling Upgrades**: Applying patches to one node at a time to minimize downtime.
- **Automated Patching**: Using scripts or tools to automate the patching process.
- **Validation**: Verifying that patches have been successfully applied and that the nodes are functioning correctly.

## 5. Standard Model
Describe the generally accepted or recommended model.
The standard model for patching AG nodes involves the following steps:
1. **Assessment**: Identify the patches required for each node.
2. **Testing**: Test the patches in a non-production environment.
3. **Scheduling**: Schedule the patching of each node, considering factors like maintenance windows and potential impact on availability.
4. **Application**: Apply the patches to each node, following a rolling upgrade approach if possible.
5. **Validation**: Verify the successful application of the patches and the continued health of the Availability Group.

## 6. Common Patterns
Document recurring, accepted patterns.
Common patterns in patching AG nodes include:
- **Regular Maintenance Windows**: Scheduling patching during regular maintenance windows to minimize impact on users.
- **Automated Scripts**: Using automated scripts to apply patches and reduce manual intervention.
- **Monitoring**: Continuously monitoring the health and performance of the Availability Group during and after patching.

## 7. Anti-Patterns
Describe common but discouraged practices.
Anti-patterns in patching AG nodes include:
- **Patching All Nodes at Once**: Applying patches to all nodes simultaneously, which can lead to extended downtime.
- **Skipping Testing**: Applying patches without testing them first, which can introduce unforeseen issues.
- **Ignoring Validation**: Failing to verify the successful application of patches, which can lead to undetected problems.

## 8. References
Provide exactly five authoritative external references.
1. [Microsoft Documentation: SQL Server Availability Groups](https://docs.microsoft.com/en-us/sql/database-engine/availability-groups/windows/always-on-availability-groups-sql-server?view=sql-server-ver15)
2. [Microsoft SQL Server Blog: Patching SQL Server Availability Groups](https://cloudblogs.microsoft.com/sqlserver/2016/09/21/patching-sql-server-availability-groups/)
3. [SQL Server Tutorial: How to Patch SQL Server Availability Group](https://www.tutorialgateway.org/how-to-patch-sql-server-availability-group/)
4. [DBA Stack Exchange: Best Practices for Patching SQL Server Availability Groups](https://dba.stackexchange.com/questions/202731/best-practices-for-patching-sql-server-availability-groups)
5. [Redgate: Deploying Database Changes to SQL Server Availability Groups](https://www.red-gate.com/simple-talk/sql/database-administration/deploying-database-changes-to-sql-server-availability-groups/)

## 9. Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-02-14 | Initial documentation |