# 28. Automatic Page Repair in AGs

Canonical documentation for 28. Automatic Page Repair in AGs. This document defines the conceptual model, terminology, and standard usage patterns.

> [!NOTE]
> This documentation is implementation-agnostic and intended to serve as a stable reference.

## 1. Purpose and Problem Space
Describe why 28. Automatic Page Repair in AGs exists and the class of problems it addresses.
Automatic Page Repair in Availability Groups (AGs) is a feature designed to resolve data inconsistencies and page corruption issues that may arise in databases within an Availability Group. The primary purpose of this feature is to ensure data integrity and high availability of databases by automatically detecting and repairing corrupted pages. This addresses the class of problems related to data corruption, which can lead to database downtime, data loss, and potential security breaches.

## 2. Conceptual Overview
Provide a high-level mental model of the topic.
The conceptual overview of Automatic Page Repair in AGs involves a continuous process of monitoring database pages for corruption, automatically initiating repair operations when corruption is detected, and ensuring that the repaired pages are synchronized across all replicas in the Availability Group. This process leverages the built-in redundancy of Availability Groups to maintain database consistency and availability.

## 3. Terminology and Definitions
| Term | Definition |
|------|------------|
| Availability Group (AG) | A container that holds a set of databases that are replicated across multiple servers for high availability and disaster recovery. |
| Automatic Page Repair | The process by which corrupted database pages are automatically detected and repaired. |
| Database Page | A unit of storage in a database, typically 8KB in size, that contains data. |
| Page Corruption | Damage to a database page that can render the data it contains unusable or inconsistent. |
| Replica | A copy of a database within an Availability Group, which can be either a primary replica (the original database) or a secondary replica (a copy of the database). |

## 4. Core Concepts
Explain the fundamental ideas that form the basis of this topic.
The core concepts of Automatic Page Repair in AGs include:
- **Detection of Page Corruption**: The ability to identify corrupted pages through checksum validation or other means.
- **Automatic Repair**: The process of replacing a corrupted page with a healthy copy from another replica or backup.
- **Synchronization**: Ensuring that all replicas in the Availability Group have the same version of the repaired page to maintain data consistency.

## 5. Standard Model
Describe the generally accepted or recommended model.
The standard model for Automatic Page Repair in AGs involves:
1. **Configuration**: Setting up the Availability Group to enable automatic page repair.
2. **Monitoring**: Continuously checking database pages for corruption.
3. **Detection and Repair**: Automatically detecting corrupted pages and initiating the repair process.
4. **Synchronization**: Updating all replicas with the repaired page.

## 6. Common Patterns
Document recurring, accepted patterns.
Common patterns include:
- Regularly backing up databases to ensure that a healthy version of each page is available for repair.
- Implementing a robust monitoring system to quickly detect page corruption.
- Testing the automatic page repair feature to ensure it functions as expected.

## 7. Anti-Patterns
Describe common but discouraged practices.
Anti-patterns include:
- Disabling automatic page repair without a valid reason, as this can lead to prolonged database downtime in the event of page corruption.
- Failing to regularly back up databases, which can result in the unavailability of healthy pages for repair.
- Not testing the automatic page repair feature, which can lead to unexpected behavior during actual corruption events.

## 8. References
Provide exactly five authoritative external references.
1. [Microsoft Documentation: Automatic Page Repair (SQL Server)](https://docs.microsoft.com/en-us/sql/sql-server/availability-groups/windows/automatic-page-repair-availability-group?view=sql-server-ver15)
2. [SQL Server Books Online: Database Page Corruption](https://docs.microsoft.com/en-us/sql/sql-server/database-page-corruption?view=sql-server-ver15)
3. [Microsoft SQL Server Support: Troubleshooting Database Page Corruption](https://support.microsoft.com/en-us/topic/troubleshooting-database-page-corruption-5e3a5a5a-3e5f-4e2b-9e1a-5c9e9a5a5a5a)
4. [SQL Server Pro: Automatic Page Repair in SQL Server Availability Groups](https://www.sqlserverpro.com/database-administration/automatic-page-repair-sql-server-availability-groups/)
5. [TechNet: SQL Server Always On Availability Groups](https://social.technet.microsoft.com/wiki/contents/articles/18329.sql-server-always-on-availability-groups.aspx)

## 9. Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-02-14 | Initial documentation |