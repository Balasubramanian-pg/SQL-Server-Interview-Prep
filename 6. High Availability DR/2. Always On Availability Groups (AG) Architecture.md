# 2. Always On Availability Groups (AG) Architecture

Canonical documentation for 2. Always On Availability Groups (AG) Architecture. This document defines the conceptual model, terminology, and standard usage patterns.

> [!NOTE]
> This documentation is implementation-agnostic and intended to serve as a stable reference.

## 1. Purpose and Problem Space
Describe why 2. Always On Availability Groups (AG) Architecture exists and the class of problems it addresses.
Always On Availability Groups (AG) Architecture exists to provide a high-availability and disaster-recovery solution for databases, addressing the class of problems related to database downtime, data loss, and performance degradation. The primary purpose of AG is to ensure that databases remain available and accessible to users, even in the event of hardware or software failures, network outages, or other disasters.

## 2. Conceptual Overview
Provide a high-level mental model of the topic.
The Always On Availability Groups (AG) Architecture is a database high-availability and disaster-recovery solution that consists of a group of databases that fail over together as a single unit. This unit, known as an availability group, is composed of a primary replica and one or more secondary replicas, which can be either synchronous or asynchronous. The primary replica is the read-write copy of the database, while the secondary replicas are read-only copies. The architecture relies on a Windows Server Failover Clustering (WSFC) cluster to manage the availability group and provide automatic failover and redundancy.

## 3. Terminology and Definitions
| Term | Definition |
|------|------------|
| Availability Group | A container that holds a set of databases that fail over together as a single unit. |
| Primary Replica | The read-write copy of the database, which is the primary source of data for the availability group. |
| Secondary Replica | A read-only copy of the database, which can be either synchronous or asynchronous. |
| Synchronous Replica | A secondary replica that is always up-to-date with the primary replica, using a synchronous commit mechanism. |
| Asynchronous Replica | A secondary replica that is not always up-to-date with the primary replica, using an asynchronous commit mechanism. |
| Windows Server Failover Clustering (WSFC) | A clustering technology that manages the availability group and provides automatic failover and redundancy. |

## 4. Core Concepts
Explain the fundamental ideas that form the basis of this topic.
The core concepts of Always On Availability Groups (AG) Architecture include:
* **Availability group**: A container that holds a set of databases that fail over together as a single unit.
* **Primary and secondary replicas**: The primary replica is the read-write copy of the database, while the secondary replicas are read-only copies.
* **Synchronous and asynchronous replication**: Synchronous replication ensures that the secondary replica is always up-to-date with the primary replica, while asynchronous replication allows for some delay between the primary and secondary replicas.
* **Windows Server Failover Clustering (WSFC)**: A clustering technology that manages the availability group and provides automatic failover and redundancy.

## 5. Standard Model
Describe the generally accepted or recommended model.
The standard model for Always On Availability Groups (AG) Architecture consists of:
* A primary replica that is the read-write copy of the database.
* One or more secondary replicas that are read-only copies of the database.
* A Windows Server Failover Clustering (WSFC) cluster that manages the availability group and provides automatic failover and redundancy.
* A listener that provides a single connection point for clients to access the availability group.

## 6. Common Patterns
Document recurring, accepted patterns.
Common patterns for Always On Availability Groups (AG) Architecture include:
* **High-availability pattern**: Using synchronous replication to ensure that the secondary replica is always up-to-date with the primary replica.
* **Disaster-recovery pattern**: Using asynchronous replication to provide a remote copy of the database in the event of a disaster.
* **Read-scale pattern**: Using secondary replicas to offload read-only workloads from the primary replica.

## 7. Anti-Patterns
Describe common but discouraged practices.
Anti-patterns for Always On Availability Groups (AG) Architecture include:
* **Over-reliance on a single replica**: Failing to provide sufficient redundancy and failover capabilities.
* **Inadequate monitoring and maintenance**: Failing to monitor and maintain the availability group, leading to performance degradation and downtime.
* **Insufficient testing and validation**: Failing to test and validate the availability group, leading to unexpected behavior and errors.

## 8. References
Provide exactly five authoritative external references.
1. Microsoft. (2022). Always On Availability Groups (SQL Server). Retrieved from <https://docs.microsoft.com/en-us/sql/database-engine/availability-groups/windows/always-on-availability-groups-sql-server>
2. Microsoft. (2022). Windows Server Failover Clustering (WSFC) with SQL Server. Retrieved from <https://docs.microsoft.com/en-us/sql/sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server>
3. SQL Server Documentation. (2022). Availability Group Listeners. Retrieved from <https://docs.microsoft.com/en-us/sql/database-engine/availability-groups/windows/listeners-availability-group>
4. Microsoft. (2022). Monitoring Always On Availability Groups. Retrieved from <https://docs.microsoft.com/en-us/sql/database-engine/availability-groups/windows/monitoring-always-on-availability-groups>
5. SQL Server Documentation. (2022). Troubleshooting Always On Availability Groups. Retrieved from <https://docs.microsoft.com/en-us/sql/database-engine/availability-groups/windows/troubleshooting-always-on-availability-groups>

## 9. Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-02-14 | Initial documentation |