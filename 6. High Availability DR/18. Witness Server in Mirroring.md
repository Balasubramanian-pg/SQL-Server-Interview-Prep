# 18. Witness Server in Mirroring

Canonical documentation for 18. Witness Server in Mirroring. This document defines the conceptual model, terminology, and standard usage patterns.

> [!NOTE]
> This documentation is implementation-agnostic and intended to serve as a stable reference.

## 1. Purpose and Problem Space
Describe why 18. Witness Server in Mirroring exists and the class of problems it addresses.
The Witness Server in Mirroring exists to provide a third-party witness to a database mirroring session, ensuring high availability and automatic failover in the event of a primary server failure. The class of problems it addresses includes database downtime, data loss, and manual intervention required for failover.

## 2. Conceptual Overview
Provide a high-level mental model of the topic.
A Witness Server is a separate server instance that monitors the primary and mirror servers in a database mirroring session. It provides a quorum-based approach to automatic failover, allowing the mirror server to take over as the new primary server in the event of a failure.

## 3. Terminology and Definitions
| Term | Definition |
|------|------------|
| Witness Server | A server instance that monitors the primary and mirror servers in a database mirroring session and provides a quorum-based approach to automatic failover. |
| Database Mirroring | A technique that maintains two copies of a database, a primary database and a mirror database, to ensure high availability and minimize data loss. |
| Quorum | A voting system that requires a majority of votes from the witness server and the primary and mirror servers to determine the state of the database mirroring session. |
| Automatic Failover | The process of automatically switching to the mirror server as the new primary server in the event of a primary server failure. |
| High Availability | The ability of a system to operate continuously without interruption, ensuring that data is always available and accessible. |

## 4. Core Concepts
Explain the fundamental ideas that form the basis of this topic.
The core concepts of a Witness Server in Mirroring include:
* Database mirroring: maintaining two copies of a database to ensure high availability and minimize data loss.
* Quorum-based approach: using a voting system to determine the state of the database mirroring session.
* Automatic failover: automatically switching to the mirror server as the new primary server in the event of a primary server failure.
* Witness server: a separate server instance that monitors the primary and mirror servers and provides a quorum-based approach to automatic failover.

## 5. Standard Model
Describe the generally accepted or recommended model.
The standard model for a Witness Server in Mirroring consists of:
* A primary server: the server that hosts the primary database.
* A mirror server: the server that hosts the mirror database.
* A witness server: the server that monitors the primary and mirror servers and provides a quorum-based approach to automatic failover.
* A quorum-based approach: the witness server and the primary and mirror servers work together to determine the state of the database mirroring session.

## 6. Common Patterns
Document recurring, accepted patterns.
Common patterns for a Witness Server in Mirroring include:
* Using a separate server instance as the witness server to ensure high availability and minimize data loss.
* Configuring the witness server to use a quorum-based approach to determine the state of the database mirroring session.
* Implementing automatic failover to minimize downtime and ensure continuous availability.

## 7. Anti-Patterns
Describe common but discouraged practices.
Anti-patterns for a Witness Server in Mirroring include:
* Using a single server instance as both the primary server and the witness server, which can lead to a single point of failure.
* Configuring the witness server to use a simple majority quorum, which can lead to split-brain scenarios.
* Failing to implement automatic failover, which can lead to manual intervention and increased downtime.

## 8. References
Provide exactly five authoritative external references.
1. Microsoft. (2022). Database Mirroring (SQL Server). Retrieved from <https://docs.microsoft.com/en-us/sql/database-engine/database-mirroring-sql-server?view=sql-server-ver15>
2. Oracle. (2022). Oracle Database High Availability. Retrieved from <https://docs.oracle.com/en/database/oracle/oracle-database/21/sbydb/introduction-to-oracle-database-high-availability.html>
3. IBM. (2022). IBM DB2 Database Mirroring. Retrieved from <https://www.ibm.com/docs/en/db2-for-zos/12?topic=mirroring-database>
4. PostgreSQL. (2022). PostgreSQL High Availability, Load Balancing, and Replication. Retrieved from <https://www.postgresql.org/docs/13/high-availability.html>
5. SQL Server Pro. (2022). SQL Server Database Mirroring Best Practices. Retrieved from <https://www.sqlserverpro.com/database-administration/sql-server-database-mirroring-best-practices/>

## 9. Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-02-14 | Initial documentation |