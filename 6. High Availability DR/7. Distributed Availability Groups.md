# 7. Distributed Availability Groups

Canonical documentation for 7. Distributed Availability Groups. This document defines the conceptual model, terminology, and standard usage patterns.

> [!NOTE]
> This documentation is implementation-agnostic and intended to serve as a stable reference.

## 1. Purpose and Problem Space
Describe why 7. Distributed Availability Groups exists and the class of problems it addresses.
Distributed Availability Groups (DAGs) exist to provide high availability and disaster recovery for databases in a distributed environment. The primary problem space addressed by DAGs is the need for continuous database availability across multiple locations, ensuring that data is always accessible and up-to-date, even in the event of a failure or disaster. This is particularly important for organizations with multiple sites, cloud-based infrastructure, or those requiring zero data loss and minimal downtime.

## 2. Conceptual Overview
Provide a high-level mental model of the topic.
At a high level, a Distributed Availability Group is a collection of SQL Server Availability Groups that are combined to form a single, unified group. This allows for the automatic seeding, replication, and failover of databases across multiple locations, ensuring high availability and disaster recovery. The conceptual model involves multiple availability groups, each containing a primary replica and one or more secondary replicas, which can be located in different data centers or cloud regions.

## 3. Terminology and Definitions
| Term | Definition |
|------|------------|
| Availability Group | A container that holds a set of databases that are replicated together as a unit. |
| Primary Replica | The primary database that accepts writes and is the source of truth for the data. |
| Secondary Replica | A read-only copy of the primary database that is kept in sync through replication. |
| Seeding | The process of initializing a new replica with a copy of the primary database. |
| Failover | The automatic process of switching to a secondary replica in the event of a primary replica failure. |

## 4. Core Concepts
Explain the fundamental ideas that form the basis of this topic.
The core concepts of Distributed Availability Groups include:
- **Automatic Seeding**: The ability to automatically initialize a new replica with a copy of the primary database.
- **Synchronous and Asynchronous Replication**: The ability to replicate data synchronously (before committing the transaction) or asynchronously (after committing the transaction).
- **Failover and Failback**: The ability to automatically switch to a secondary replica in the event of a primary replica failure, and then switch back to the primary replica when it becomes available again.
- **Read-Only Routing**: The ability to route read-only workloads to secondary replicas, reducing the load on the primary replica.

## 5. Standard Model
Describe the generally accepted or recommended model.
The standard model for Distributed Availability Groups involves a combination of the following components:
- **Multiple Availability Groups**: Each containing a primary replica and one or more secondary replicas.
- **Automatic Seeding and Replication**: To ensure that all replicas are kept in sync.
- **Failover and Failback**: To ensure high availability and minimize downtime.
- **Read-Only Routing**: To reduce the load on the primary replica and improve performance.

## 6. Common Patterns
Document recurring, accepted patterns.
Common patterns for Distributed Availability Groups include:
- **Disaster Recovery**: Using DAGs to replicate data to a remote location, ensuring that data is available even in the event of a disaster.
- **High Availability**: Using DAGs to replicate data within a single location, ensuring that data is always available and minimizing downtime.
- **Read-Only Workloads**: Using DAGs to route read-only workloads to secondary replicas, reducing the load on the primary replica and improving performance.

## 7. Anti-Patterns
Describe common but discouraged practices.
Anti-patterns for Distributed Availability Groups include:
- **Manual Seeding and Replication**: Manually initializing and replicating databases, which can lead to errors and inconsistencies.
- **Asynchronous Replication Only**: Using only asynchronous replication, which can lead to data loss in the event of a failure.
- **No Read-Only Routing**: Not routing read-only workloads to secondary replicas, which can lead to increased load on the primary replica and reduced performance.

## 8. References
Provide exactly five authoritative external references.
1. [Microsoft Documentation: Distributed Availability Groups](https://docs.microsoft.com/en-us/sql/database-engine/availability-groups/windows/distributed-availability-groups)
2. [SQL Server Documentation: Always On Availability Groups](https://docs.microsoft.com/en-us/sql/database-engine/availability-groups/windows/alwayson-availability-groups-sql-server)
3. [Microsoft Azure Documentation: Azure SQL Database Business Continuity](https://docs.microsoft.com/en-us/azure/sql-database/sql-database-business-continuity)
4. [VMware Documentation: vSphere Availability and Disaster Recovery](https://docs.vmware.com/en/VMware-vSphere/7.0/com.vmware.vsphere.availability.doc/GUID-73BE99C6-2C2B-46A5-8B5B-8B5B8B5B8B5B.html)
5. [IBM Documentation: IBM DB2 pureScale: High Availability and Disaster Recovery](https://www.ibm.com/support/knowledgecenter/en/SSEPGG_11.5.0/com.ibm.db2.luw.admin.ha.doc/doc/c0061177.html)

## 9. Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-02-14 | Initial documentation |