# 34. Querying CDC Tables

Canonical documentation for 34. Querying CDC Tables. This document defines the conceptual model, terminology, and standard usage patterns.

> [!NOTE]
> This documentation is implementation-agnostic and intended to serve as a stable reference.

## 1. Purpose and Problem Space
Describe why 34. Querying CDC Tables exists and the class of problems it addresses.
Querying CDC (Change Data Capture) tables is essential for tracking changes made to data in a database. CDC tables store a record of all changes, including inserts, updates, and deletes, allowing for auditing, replication, and data integration. The primary purpose of querying CDC tables is to extract valuable information about data modifications, enabling use cases such as data warehousing, business intelligence, and real-time analytics. The problem space addressed by querying CDC tables includes data consistency, data quality, and compliance with regulatory requirements.

## 2. Conceptual Overview
Provide a high-level mental model of the topic.
The conceptual overview of querying CDC tables involves understanding the CDC process, which captures changes made to data in a database and stores them in a separate table. This table contains metadata about each change, including the type of operation (insert, update, or delete), the timestamp of the change, and the affected data. Querying CDC tables involves writing SQL queries that filter, aggregate, and analyze this metadata to extract meaningful insights about data modifications.

## 3. Terminology and Definitions
| Term | Definition |
|------|------------|
| CDC | Change Data Capture, a process that captures changes made to data in a database |
| CDC Table | A table that stores a record of all changes made to data in a database |
| Change Type | The type of operation that resulted in a change (insert, update, or delete) |
| Timestamp | The date and time when a change was made |
| Operation | A single change made to data in a database (e.g., insert, update, or delete) |
| Transaction | A set of operations that are executed as a single, all-or-nothing unit of work |

## 4. Core Concepts
Explain the fundamental ideas that form the basis of this topic.
The core concepts of querying CDC tables include understanding the CDC process, the structure of CDC tables, and the types of queries that can be executed against them. Key concepts include:
* Change data capture: The process of capturing changes made to data in a database.
* CDC table structure: The organization of metadata in a CDC table, including columns for change type, timestamp, and affected data.
* Query types: The different types of queries that can be executed against CDC tables, such as filtering, aggregating, and analyzing changes.

## 5. Standard Model
Describe the generally accepted or recommended model.
The standard model for querying CDC tables involves the following steps:
1. Identify the CDC table: Determine which CDC table to query based on the database and schema of interest.
2. Filter changes: Use SQL queries to filter changes based on criteria such as change type, timestamp, and affected data.
3. Aggregate changes: Use aggregate functions to summarize changes, such as counting the number of inserts or updates.
4. Analyze changes: Use analytical functions to gain insights into data modifications, such as identifying trends or patterns.

## 6. Common Patterns
Document recurring, accepted patterns.
Common patterns for querying CDC tables include:
* Filtering changes by timestamp to analyze recent modifications
* Aggregating changes by change type to understand the volume of inserts, updates, and deletes
* Analyzing changes by affected data to identify trends or patterns in data modifications

## 7. Anti-Patterns
Describe common but discouraged practices.
Anti-patterns for querying CDC tables include:
* Querying CDC tables without proper filtering, resulting in large, unnecessary result sets
* Failing to consider the timestamp of changes, leading to incorrect or incomplete analysis
* Using inefficient query techniques, such as using SELECT \* instead of selecting specific columns

## 8. References
Provide exactly five authoritative external references.
1. Microsoft. (2022). Change Data Capture (CDC) in SQL Server. Retrieved from <https://docs.microsoft.com/en-us/sql/relational-databases/track-changes/about-change-data-capture-sql-server>
2. Oracle. (2022). Change Data Capture. Retrieved from <https://docs.oracle.com/en/database/oracle/oracle-database/21/sutil/oracle-change-data-capture.html>
3. IBM. (2022). Change Data Capture. Retrieved from <https://www.ibm.com/docs/en/db2-for-zos/12?topic=change-data-capture>
4. PostgreSQL. (2022). Logical Decoding. Retrieved from <https://www.postgresql.org/docs/current/logicaldecoding.html>
5. Apache Kafka. (2022). Change Data Capture (CDC) with Kafka Connect. Retrieved from <https://kafka.apache.org/documentation/#connect_cdc>

## 9. Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-02-14 | Initial documentation |