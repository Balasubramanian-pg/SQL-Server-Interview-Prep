# 41. Managed Identities for SQL Server

Canonical documentation for 41. Managed Identities for SQL Server. This document defines the conceptual model, terminology, and standard usage patterns.

> [!NOTE]
> This documentation is implementation-agnostic and intended to serve as a stable reference.

## 1. Purpose and Problem Space
Describe why 41. Managed Identities for SQL Server exists and the class of problems it addresses.
Managed Identities for SQL Server exists to simplify the management of identities and secrets for SQL Server instances, particularly in cloud and hybrid environments. The primary problem it addresses is the secure management of authentication credentials, such as passwords and certificates, which are required for SQL Server to authenticate to external services like Azure Storage, Azure Active Directory, and other SQL Server instances. Without managed identities, database administrators must manually manage these credentials, which can lead to security risks, increased administrative burden, and decreased compliance with organizational security policies.

## 2. Conceptual Overview
Provide a high-level mental model of the topic.
Managed Identities for SQL Server is a feature that enables SQL Server instances to authenticate to Azure services without requiring explicit credentials, such as passwords or certificates, to be stored in the SQL Server instance. This is achieved through the use of Azure Active Directory (Azure AD) and Azure Managed Identity, which provides a secure and automated way to manage identities and authenticate to Azure services. The conceptual model involves the following components: SQL Server instance, Azure AD, Azure Managed Identity, and the target Azure service.

## 3. Terminology and Definitions
| Term | Definition |
|------|------------|
| Managed Identity | A secure and automated way to manage identities and authenticate to Azure services, without requiring explicit credentials. |
| Azure Active Directory (Azure AD) | A cloud-based identity and access management service that provides a single identity for users, groups, and applications. |
| SQL Server Instance | A single installation of SQL Server, which can be running on a physical server, virtual machine, or in a cloud environment. |
| Azure Service | A cloud-based service provided by Microsoft Azure, such as Azure Storage, Azure Cosmos DB, or Azure Key Vault. |
| Authentication | The process of verifying the identity of a user, group, or application, to ensure that only authorized entities can access a system or resource. |

## 4. Core Concepts
Explain the fundamental ideas that form the basis of this topic.
The core concepts of Managed Identities for SQL Server include:
* **Identity Management**: The process of creating, managing, and using identities to authenticate to Azure services.
* **Authentication**: The process of verifying the identity of a SQL Server instance to ensure that only authorized instances can access Azure services.
* **Authorization**: The process of determining what actions a SQL Server instance can perform on an Azure service, based on its identity and permissions.
* **Credential Management**: The process of securely storing, managing, and rotating credentials, such as passwords and certificates, used to authenticate to Azure services.

## 5. Standard Model
Describe the generally accepted or recommended model.
The standard model for Managed Identities for SQL Server involves the following steps:
1. **Enable Managed Identity**: Enable the managed identity feature on the SQL Server instance.
2. **Register with Azure AD**: Register the SQL Server instance with Azure AD, to obtain an identity that can be used to authenticate to Azure services.
3. **Configure Permissions**: Configure the necessary permissions and access control lists (ACLs) to allow the SQL Server instance to access the target Azure service.
4. **Use Managed Identity**: Use the managed identity to authenticate to the target Azure service, without requiring explicit credentials.

## 6. Common Patterns
Document recurring, accepted patterns.
Common patterns for Managed Identities for SQL Server include:
* **Using Managed Identity for Azure Storage**: Using managed identity to authenticate to Azure Storage, to store and retrieve data, such as backups and log files.
* **Using Managed Identity for Azure Key Vault**: Using managed identity to authenticate to Azure Key Vault, to store and retrieve sensitive data, such as encryption keys and certificates.
* **Using Managed Identity for Azure Active Directory**: Using managed identity to authenticate to Azure AD, to perform tasks such as user and group management.

## 7. Anti-Patterns
Describe common but discouraged practices.
Anti-patterns for Managed Identities for SQL Server include:
* **Storing Credentials in Clear Text**: Storing credentials, such as passwords and certificates, in clear text, rather than using a secure storage mechanism, such as Azure Key Vault.
* **Using Shared Credentials**: Using shared credentials, such as a shared password or certificate, across multiple SQL Server instances, rather than using unique credentials for each instance.
* **Not Rotating Credentials**: Not rotating credentials, such as passwords and certificates, on a regular basis, to reduce the risk of credential compromise.

## 8. References
Provide exactly five authoritative external references.
1. [Microsoft Azure Documentation: Managed Identity](https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/)
2. [Microsoft SQL Server Documentation: Managed Identity](https://docs.microsoft.com/en-us/sql/database-engine/configure-windows/managed-identity?view=sql-server-ver15)
3. [Azure Active Directory Documentation: Managed Identity](https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/)
4. [Azure Security Documentation: Managed Identity](https://docs.microsoft.com/en-us/azure/security/fundamentals/managed-identity)
5. [Microsoft Cloud Security Documentation: Managed Identity](https://docs.microsoft.com/en-us/azure/cloud-adoption-framework/ready/azure-best-practices/managed-identity)

## 9. Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-02-14 | Initial documentation |