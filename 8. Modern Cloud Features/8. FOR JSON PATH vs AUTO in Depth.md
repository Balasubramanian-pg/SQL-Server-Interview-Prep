# 8. FOR JSON PATH vs AUTO in Depth

Canonical documentation for 8. FOR JSON PATH vs AUTO in Depth. This document defines the conceptual model, terminology, and standard usage patterns.

> [!NOTE]
> This documentation is implementation-agnostic and intended to serve as a stable reference.

## 1. Purpose and Problem Space
Describe why 8. FOR JSON PATH vs AUTO in Depth exists and the class of problems it addresses.
The `FOR JSON` clause in SQL Server is used to format query results as JSON data. However, there are two modes of using `FOR JSON`: `PATH` and `AUTO`. The purpose of this documentation is to explore the differences between these two modes, the problems they address, and the scenarios in which they are most applicable. The class of problems that `FOR JSON PATH` and `AUTO` address includes data transformation, data exchange, and data representation in JSON format.

## 2. Conceptual Overview
Provide a high-level mental model of the topic.
The `FOR JSON` clause is used in conjunction with a `SELECT` statement to transform relational data into JSON data. The `PATH` mode allows for explicit control over the JSON output, enabling the specification of the JSON structure and the mapping of columns to JSON properties. On the other hand, the `AUTO` mode automatically generates the JSON structure based on the `SELECT` statement, providing a simpler and more straightforward way to generate JSON data.

## 3. Terminology and Definitions
| Term | Definition |
|------|------------|
| FOR JSON | A clause used in SQL Server to format query results as JSON data. |
| PATH Mode | A mode of the `FOR JSON` clause that allows for explicit control over the JSON output. |
| AUTO Mode | A mode of the `FOR JSON` clause that automatically generates the JSON structure based on the `SELECT` statement. |
| JSON | JavaScript Object Notation, a lightweight data interchange format. |
| Relational Data | Data stored in a relational database management system. |

## 4. Core Concepts
Explain the fundamental ideas that form the basis of this topic.
The core concepts of `FOR JSON PATH` and `AUTO` include:
* Data transformation: The process of converting relational data into JSON data.
* JSON structure: The organization and layout of the JSON data, including the use of objects, arrays, and properties.
* Column mapping: The process of mapping relational columns to JSON properties.
* Explicit control: The ability to specify the JSON structure and column mapping in the `PATH` mode.
* Automatic generation: The ability of the `AUTO` mode to generate the JSON structure based on the `SELECT` statement.

## 5. Standard Model
Describe the generally accepted or recommended model.
The standard model for using `FOR JSON PATH` and `AUTO` involves the following steps:
1. Determine the required JSON structure and column mapping.
2. Choose the appropriate mode (`PATH` or `AUTO`) based on the complexity of the JSON structure and the need for explicit control.
3. Use the `FOR JSON` clause in conjunction with a `SELECT` statement to generate the JSON data.
4. Verify the resulting JSON data to ensure it meets the requirements.

## 6. Common Patterns
Document recurring, accepted patterns.
Common patterns for using `FOR JSON PATH` and `AUTO` include:
* Using `PATH` mode for complex JSON structures that require explicit control.
* Using `AUTO` mode for simple JSON structures that can be automatically generated.
* Combining `FOR JSON` with other SQL Server features, such as `OPENJSON` and `ISJSON`, to create robust JSON data processing pipelines.

## 7. Anti-Patterns
Describe common but discouraged practices.
Anti-patterns for using `FOR JSON PATH` and `AUTO` include:
* Using `AUTO` mode for complex JSON structures that require explicit control, resulting in suboptimal JSON output.
* Using `PATH` mode for simple JSON structures that can be automatically generated, resulting in unnecessary complexity.
* Failing to verify the resulting JSON data, leading to errors and inconsistencies.

## 8. References
Provide exactly five authoritative external references.
1. [Microsoft Documentation: FOR JSON (SQL Server)](https://docs.microsoft.com/en-us/sql/relational-databases/json/format-query-results-as-json-with-for-json-sql-server)
2. [SQL Server Tutorial: FOR JSON PATH and AUTO](https://www.sqlservertutorial.net/sql-server-basics/sql-server-for-json/)
3. [JSON.org: JSON Specification](https://www.json.org/json-en.html)
4. [W3Schools: JSON Tutorial](https://www.w3schools.com/js/js_json_intro.asp)
5. [Stack Overflow: FOR JSON PATH vs AUTO](https://stackoverflow.com/questions/44428354/for-json-path-vs-for-json-auto)

## 9. Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-02-14 | Initial documentation |