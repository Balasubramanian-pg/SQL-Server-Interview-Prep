# 45. Always Encrypted with Secure Enclaves

Canonical documentation for 45. Always Encrypted with Secure Enclaves. This document defines the conceptual model, terminology, and standard usage patterns.

> [!NOTE]
> This documentation is implementation-agnostic and intended to serve as a stable reference.

## 1. Purpose and Problem Space
Describe why 45. Always Encrypted with Secure Enclaves exists and the class of problems it addresses.
Always Encrypted with Secure Enclaves is a feature designed to protect sensitive data in databases by ensuring that data is always encrypted, even during processing. This technology addresses the problem of securing data in use, which is a critical concern for organizations handling sensitive information. The primary goal of Always Encrypted with Secure Enclaves is to enable secure computation on encrypted data without compromising the confidentiality of the data.

## 2. Conceptual Overview
Provide a high-level mental model of the topic.
Always Encrypted with Secure Enclaves relies on a combination of encryption, secure enclaves, and trusted execution environments to safeguard data. The conceptual model involves encrypting data at rest and in transit, and then processing the encrypted data within a secure enclave. This approach ensures that even if an unauthorized party gains access to the system, they will not be able to access the sensitive data.

## 3. Terminology and Definitions
| Term | Definition |
|------|------------|
| Always Encrypted | A technology that ensures data is always encrypted, even during processing. |
| Secure Enclave | A trusted execution environment that provides a secure space for processing sensitive data. |
| Trusted Execution Environment (TEE) | A secure environment that provides a high level of assurance for the execution of code and the protection of data. |
| Encryption | The process of converting plaintext data into unreadable ciphertext to protect it from unauthorized access. |
| Data in Use | Data that is being processed or manipulated by an application or system. |

## 4. Core Concepts
Explain the fundamental ideas that form the basis of this topic.
The core concepts of Always Encrypted with Secure Enclaves include:
* **Encryption**: Protecting data with encryption algorithms to ensure confidentiality.
* **Secure Enclaves**: Utilizing trusted execution environments to process encrypted data.
* **Trusted Execution Environments (TEEs)**: Providing a secure space for code execution and data protection.
* **Key Management**: Managing encryption keys to ensure secure access to encrypted data.
* **Access Control**: Controlling access to encrypted data and secure enclaves.

## 5. Standard Model
Describe the generally accepted or recommended model.
The standard model for Always Encrypted with Secure Enclaves involves the following components:
* **Client**: The application or system that requests access to encrypted data.
* **Database**: The repository that stores the encrypted data.
* **Secure Enclave**: The trusted execution environment that processes the encrypted data.
* **Key Store**: The secure storage for encryption keys.
* **Access Control System**: The system that manages access to encrypted data and secure enclaves.

## 6. Common Patterns
Document recurring, accepted patterns.
Common patterns for Always Encrypted with Secure Enclaves include:
* **Client-Side Encryption**: Encrypting data on the client-side before sending it to the database.
* **Server-Side Encryption**: Encrypting data on the server-side before storing it in the database.
* **Secure Enclave-Based Processing**: Processing encrypted data within a secure enclave.
* **Key Encryption**: Encrypting encryption keys to protect them from unauthorized access.

## 7. Anti-Patterns
Describe common but discouraged practices.
Anti-patterns for Always Encrypted with Secure Enclaves include:
* **Storing Encryption Keys in Plain Text**: Storing encryption keys in plain text, making them vulnerable to unauthorized access.
* **Using Weak Encryption Algorithms**: Using weak or outdated encryption algorithms that can be easily broken.
* **Not Implementing Access Control**: Failing to implement access control mechanisms, allowing unauthorized access to encrypted data.
* **Not Monitoring Secure Enclaves**: Failing to monitor secure enclaves for potential security breaches.

## 8. References
Provide exactly five authoritative external references.
1. [Microsoft Azure Always Encrypted](https://docs.microsoft.com/en-us/azure/sql-database/sql-database-always-encrypted)
2. [Intel Software Guard Extensions (SGX)](https://software.intel.com/content/www/us/en/develop/topics/sgx.html)
3. [AMD Secure Encrypted Virtualization (SEV)](https://www.amd.com/en/technologies/sev)
4. [National Institute of Standards and Technology (NIST) Special Publication 800-57](https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-57r5.pdf)
5. [IEEE Standard for a Software Development Process for Secure Systems](https://ieeexplore.ieee.org/document/9782965)

## 9. Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-02-14 | Initial documentation |