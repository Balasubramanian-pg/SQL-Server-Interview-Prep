# 2. Natively Compiled Stored Procedures

Canonical documentation for 2. Natively Compiled Stored Procedures. This document defines the conceptual model, terminology, and standard usage patterns.

> [!NOTE]
> This documentation is implementation-agnostic and intended to serve as a stable reference.

## 1. Purpose and Problem Space
Describe why 2. Natively Compiled Stored Procedures exists and the class of problems it addresses.
Natively Compiled Stored Procedures exist to improve the performance of database operations by compiling stored procedures into native machine code. This addresses the problem of slow execution times for complex database queries and procedures, which can lead to decreased system responsiveness and increased latency. The primary class of problems addressed by Natively Compiled Stored Procedures includes optimizing database performance, reducing latency, and improving overall system efficiency.

## 2. Conceptual Overview
Provide a high-level mental model of the topic.
Natively Compiled Stored Procedures involve compiling stored procedures into native machine code, which can be executed directly by the CPU without the need for interpretation or compilation at runtime. This compilation process occurs prior to execution, resulting in significant performance improvements. The conceptual model consists of the following components: stored procedure definition, compilation, and execution. The compilation process translates the stored procedure code into native machine code, which is then stored in a database catalog. During execution, the native machine code is loaded into memory and executed directly by the CPU.

## 3. Terminology and Definitions
| Term | Definition |
|------|------------|
| Natively Compiled Stored Procedure | A stored procedure that has been compiled into native machine code for improved performance. |
| Stored Procedure | A set of SQL statements that perform a specific task, stored in a database catalog. |
| Compilation | The process of translating stored procedure code into native machine code. |
| Native Machine Code | Machine-specific code that can be executed directly by the CPU. |
| Database Catalog | A repository that stores database metadata, including stored procedure definitions and compiled native machine code. |

## 4. Core Concepts
Explain the fundamental ideas that form the basis of this topic.
The core concepts of Natively Compiled Stored Procedures include:
* **Compilation**: The process of translating stored procedure code into native machine code.
* **Native Machine Code**: Machine-specific code that can be executed directly by the CPU.
* **Database Catalog**: A repository that stores database metadata, including stored procedure definitions and compiled native machine code.
* **Execution**: The process of loading compiled native machine code into memory and executing it directly by the CPU.

## 5. Standard Model
Describe the generally accepted or recommended model.
The standard model for Natively Compiled Stored Procedures involves the following steps:
1. **Definition**: Define a stored procedure using SQL statements.
2. **Compilation**: Compile the stored procedure into native machine code.
3. **Storage**: Store the compiled native machine code in a database catalog.
4. **Execution**: Load the compiled native machine code into memory and execute it directly by the CPU.

## 6. Common Patterns
Document recurring, accepted patterns.
Common patterns for Natively Compiled Stored Procedures include:
* **Frequently Executed Procedures**: Compiling frequently executed stored procedures to improve performance.
* **Complex Queries**: Compiling complex queries to reduce execution time and improve system responsiveness.
* **Real-Time Systems**: Using Natively Compiled Stored Procedures in real-time systems to ensure predictable and fast execution times.

## 7. Anti-Patterns
Describe common but discouraged practices.
Anti-patterns for Natively Compiled Stored Procedures include:
* **Over-Compilation**: Compiling stored procedures that are rarely executed, resulting in unnecessary compilation overhead.
* **Under-Compilation**: Failing to compile stored procedures that are frequently executed, resulting in decreased performance.
* **Incorrect Compilation**: Compiling stored procedures with incorrect or outdated parameters, resulting in incorrect or unexpected behavior.

## 8. References
Provide exactly five authoritative external references.
1. Microsoft. (2022). Natively Compiled Stored Procedures. Retrieved from <https://docs.microsoft.com/en-us/sql/relational-databases/in-memory-oltp/natively-compiled-stored-procedures>
2. Oracle. (2022). Compiled Stored Procedures. Retrieved from <https://docs.oracle.com/en/database/oracle/oracle-database/21/lnpls/compiled-stored-procedures.html>
3. IBM. (2022). Compiled SQL. Retrieved from <https://www.ibm.com/docs/en/db2-for-zos/12?topic=compiled-sql>
4. PostgreSQL. (2022). Compiled Functions. Retrieved from <https://www.postgresql.org/docs/13/xfunc-compiled.html>
5. SQL Server Documentation. (2022). Natively Compiled Stored Procedures. Retrieved from <https://docs.microsoft.com/en-us/sql/relational-databases/in-memory-oltp/natively-compiled-stored-procedures?view=sql-server-ver15>

## 9. Change Log
| Version | Date | Description |
|---------|------|-------------|
| 1.0 | 2026-02-14 | Initial documentation |